Title: '六度空间与生成SNS用户关系图'
Date: 2011-5-20

六度空间理论，又叫六度分割理论，百度百科上有如下解释：

有一个数学领域的猜想，名为Six Degrees of Separation，中文翻译包括以下几种： 六度分割理论或小世界理论等。 理论指出：你和任何一个陌生人之间所间隔的人不会超过六个，也就是说，最多通过六个人你就能够认识任何一个陌生人。这就是六度分割理论，也叫小世界理论。
<blockquote>1，这个理论在互联网上尤其是SNS体现的更加突出。豆瓣网提供一个可以根据用户ID来查询此用户关注的人（单向）的列表，因此可以借助此接口来获取豆瓣上的人际关系数据。

2，Graphviz （Graph Visualization Software的缩写）是一个由AT&amp;T实验室启动的开源工具包，用于绘制DOT语言脚本描述的图形。</blockquote>
<!--more-->借助上面两项就可以做我们想要做的事情了，只要写一个小爬虫软件，不断的爬一个给定用户的所有关注的人，然后再爬他关注的人中的关注关系，依据六度空间理论就可以遍历整个豆瓣所有非孤立用户了，爬虫的逻辑并不复杂，这里是用C# + Mono实现的。
将爬虫爬到的结果生成为DOT脚本，使用Graphviz提供的工具来生成可视化的用户关注关系图，结果是非常有意思的～！

这是艾斯昆同学在豆瓣上所有关注用户生成的图，这应该只算一度空间吧：
<img src="http://img1.guokr.com/gkimage/3x/38/gy/3x38gy.png" alt="" />

于是这样也太无聊了吧～好吧，再加上两个关注的用户，他们之间互相关注的关系图：
<img src="http://img1.guokr.com/gkimage/et/r9/12/etr912.png" alt="" />

看上去还不错，不过二度空间应该是将所有关注者的关注者，之间的互相关系列出来，但是这个数据量已经非常大了，艾斯昆同学有100多个关注者，抓到两万条数据的时候被踢掉了。

而且将所有关注的人关注的人之间的关系列出来，其中很大一部分没有重叠，生成的图片除了壮观之外实际价值并不大，因此只列出关注的人关注的人中，其中你关注的人之间的关注关系（这么说好像有点乱，可以这么理解，就是你的朋友中他们都谁和谁认识），这样图就比较好看了：
<img src="http://img1.guokr.com/gkimage/li/ld/ni/lildni.png" alt="" />

Graphviz自动将关系比较密集的元素放在一起了，因此完全可以从图上分析出几个朋友圈子，比如说最上面那一坨全部都是科幻群里的朋友，中间靠左全是果壳网的同学，下面有几个比较小的是之前常去的一个贴吧里的朋友。

如果关注者少一些的话这张图看上去更加清晰一些，比如绿姐这张：
<img src="http://img1.guokr.com/gkimage/vm/t3/zx/vmt3zx.png" alt="" />

好吧，如果你真的想看二度空间的关系图，下面是只关注了十个用户的关系图，这样数据量已经大的惊人（1500条记录）了：
<img src="http://img1.guokr.com/gkimage/md/9z/e6/md9ze6.png" alt="" />

真正去获取二度以上空间的用户关系数据量就已经达到一个十分庞大的数字了，同时这么多的数字想要来生成关系图基本上是不可能的。

我们完全可以有理由相信只要六度就可以遍历绝大部分豆瓣用户，除了其中一些孤立用户（没有关注任何人，同时也没有任何人关注，通常都是僵尸用户或者注册上来一次就忘记密码的）。

另外不能遍历到的，恐怕就是豆瓣上一些“孤岛”，处于这些孤岛中的用户，他们没有任何路径通往“大陆”。这种情况应该有吧，比如说现实中认识的两三个人，他们注册了豆瓣互相关注，以后不太活跃也没有关注其他人。规模再大一些的孤岛是否能存在呢？我觉得可能性不大。

感兴趣的同学可以跟帖我帮你生成你的好友关系图，不过关注者不能太多～

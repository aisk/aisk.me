Title: '果壳网技术部秘闻录（一）'
Date: 2011-5-20

众所周知，果壳网是一个以传播封建迷信为主的网站，聚集了大量年轻用户。之前我关注这个网站也有很长的一段时间了，对于他们发表的一些封建迷信文化的文章十分感兴趣，同时也十分欣赏他们这种以宣扬封建迷信，破除科学知识对普通大众的毒害为己任的志向。

但我从来没有想过会有一天在果壳网工作。那年我大四即将毕业，虽然是计算机专业但在学校整天玩网游，对于编程等等方面的知识所知甚少，但果壳网仍然破格录取了我为实习生。

我到果壳网实习的第一天，果壳网技术部的总奸拍着我的肩膀说，“小艾啊，你可要好好干，我们是创业公司，等以后网站火了，封建迷信真的能破除科学知识对劳苦大众的桎梏那一天，你可就成了公司的元老了！”

当时我感动的热泪盈眶，拍着胸脯说自己以后一定要好好干，总奸很满意的笑了笑，对我说，“走，我这就带你去果壳网网站的机房去。”

<!--more-->

实习的第一天就能正式投入工作岗位，我感到万分荣幸，我问总奸，“总奸，咱们网站现在的技术架构如何，有多少台服务器呢？”

总奸看了我一眼，沉默良久，说：“小艾啊，你知道咱们果壳网正在推广绿色环保低碳的健康封建迷信生活，抵制科学知识搞的那套高污染、高能耗的坑爹技术，所以咱们的服务器集群也是最新的一组绿色无污染低能耗的服务器组成的，不用烧电，只需要一些淀粉和葡萄糖等天然化学染料即可运转。”

“哇，果壳网的技术果然名不虚传！”听到总奸的话我不由得为之一振，同时又为自己身为果壳网员工之一深感自豪。

“不过小艾啊，你身高多少？”总奸突然问。

“啊，总奸，我一米八。”

总奸掏出电话，拨打了一个号码，说：“喂，行政部吗，今天新到一台36U的服务器，你们赶快腾出一个匹配的机柜来。”

虽然对于编程等知识我基本完全不了解，但是对于36U这个概念还是有些了解的，这是一个非常夸张的数字，让我对于果壳网的服务器更加向往了，不知道他们的服务器集群得有多大的规模。

正在这时机房到了，是一个大门很宽的房间。总奸推开门，没有印象中机房恐怖的吵闹声，这里很安静，甚至还能听到里面的人的交谈声音。

进了机房，里面环境非常好，简直快赶上办公室的环境了。

总奸说：“小艾啊，你来的刚好，我们的服务器集群刚好停机维护完毕，现在正要启动，你可以参观学习一下。运维是一个非常有技术含量的工作，要是你以后对这方面感兴趣的话我可以专门培养一下你。”

听到总奸的话我欣喜若狂。只见总奸走到机房中央的一台电脑前，打开了其中的一台显示器。电脑上装的是Linux，我听说过Linux，据说是一种非常了不起的操作系统，比番茄花园出的Windows XP还牛，号称黑客专用操作系统。这让我对总奸更加刮目相看了。

总奸面前安装有Linux操作系统的电脑启动完毕之后，他打开了一个终端，用十分娴熟的手法输入了一连串的命令，正在我眼花缭乱的时候总奸按下了回车键。电脑主机的硬盘发出了一阵十分可怕的轰鸣声，过了一会，一个浏览器窗口成功启动了起来。

然后总奸登录了QQ空间，开始偷起菜来。

过了半盏茶的公司，总奸的菜终于偷完了，他眉毛胡子舒展开来，转过身来说：“哎呀小艾啊，不好意思刚才处理了一些私事，我们正式开始启动果壳网的服务器集群吧！”

“嗯，好的！”我说，听到服务器集群要正式启动了，我心中不由得一阵激动。

之间总奸关掉电脑，对着机房里坐着休息还有聊八卦的人大喊了一声：“点，斜杠，GUOKR WANG SERVER CLUSTER，空格，START！”

顿时整个房间热闹了起来，房间边上一个人火速冲到了机房的一个机柜中，大喊：“我来组成负载均衡服务器！”

正在我还不知道发生了什么事情的时候，身后又有一个人大喊：“我来组成数据库服务器！”

“我来组成缓存服务器！”

“我来组成静态文件服务器！”

顿时间整个机房喊声此起彼伏，上一刻还分散在各个角落吃瓜子喝茶的人有条不紊地钻进了各个机柜中。

当他们都各就各位，每个人都组成了自己相应的服务器，这时所有人都同时大喊：“果壳网服务器集群，合体！”

这几十人同时发出的喊声惊天动地，让我觉得震耳欲聋。这时总奸又坐到机房中间的那台电脑前，打开了浏览器，输入了果壳网的网址，这时果壳网的首页成功显示了出来。

“很好，这次集群的启动时间又缩短了三秒，大家都很努力！”总奸高兴的说，然后转过头来对我说：“小艾啊，果壳网的服务器集群启动的场面很波澜壮阔吧，下面我给你揭示一下整个网站是如何运转的吧！不过你得懂一些HTTP协议还有HTTP、CSS、JavaScript的知识。”

“哦总奸，这些知识我还是比较了解的，您看过我的简历应该知道的。”我只好硬着头皮说，同时后悔上这些课的时候我都用来刷蛋刀了。

“嗯，那就好，你看小艾，每当一个用户发来一个HTTP Request请求的时候，都会达到我们的负载均衡服务器。”总奸指着中间一台机柜中蹲着的一个满脸疙瘩的哥们儿，他面前有一台显示器，显示器上不停的刷新一些文字，仔细看去都是一些IP地址还有HTTP请求的头信息。

“负载均衡服务器会将这些请求平均的分配给后端的Web应用服务器集群，”总奸往后走，之间那个哥们儿以飞快的速度将屏幕上的那些数字和字母抄在了一张一张的小纸条上，一次递给了身后几个机柜里面的人，“这里就是咱们的Web应用服务器集群了，他们依据用户请求的GET和POST请求——GET和POST你懂吗，哦，那就好——然后他们去数据库服务器查询相应的数据，根据查询结果来生成HTML代码。”

总奸说着，然后继续往后走，后面是还是很多机柜，但是这些机柜体积都比较大。我凑过去看到原来机柜中除了人之外还有很多本子，前面Web应用服务器的人传来的都是一条条查询语句，数据库服务器的人就根据查询条件先看大概要查询的数据在哪本本子上，然后再查看再哪页，检索到相应条目后，再把搜索结果递给前面的服务器。

“当然还有我们的缓存服务器，”总奸说，“现代的计算机系统瓶颈都在IO上，即使我们果壳网的服务器集群也是这样，每次查询都需要确定分本、分页、分行等信息，更何况写入的耗时，而且写入还要在数据库的引索上添加信息，于是我们就引进了缓存服务器集群，现在缓存是解决IO的最行之有效的方法，说白了也就是拿空间复杂度换取时间复杂度，你要是一直做这个行业这些都是要懂的。”

我似懂非懂的点了点头，然后问：“总奸，之前招聘的时候不是要懂Python语言吗，现在咱们网站的程序都是Python写的，然后在这，额，服务器集群上跑吗？”

“哈哈，小艾啊，不是这个样子的，”总奸爽朗的一笑，“虽然相比汇编、C/C++、Java等语言Python更加高级更加远离底层一些，但仍称不上真正的高级语言，我们现在网站使用的是一种我开发的，叫做‘撸啊’的真正的高级语言。”

“这种语言十分接近自然语言，比如这个例子。”总奸说着拿出一张纸，在纸上写道：

“打印 ‘Hello World！’”

然后他将这张纸塞给了身后的一台机柜，机柜里面的人接到纸，然后在机柜的键盘上打了几个字，我看了下应该是Hello World这几个字母，然后马上机房中间的那台电脑显示器上出现了“Hello World！”字样。

“怎么样，小艾，‘撸啊’语言是不是很好学？嗯嗯，相信你应该很快就能上手的。此外‘撸啊’语言最大的特性就是其撸棒性特别强，比如这样。”说着总奸又拿出一张纸，把刚才的那句话又写了一遍，不过字迹写的十分潦草，其中“印”字还是错别字，他将纸条交给身后的机柜，马上显示器上又显示出了结果，仍然是“Hello World！”字样。

“怎么样，领略到‘撸啊’语言的强大撸棒性了吧，即使我字迹写的太潦草，甚至还有错别字，解释器都可以正确执行代码并输出正确的结果，”总奸说，“当初为了保证‘撸啊’语言强大的撸棒性，我们挑选服务器全部都是二十出头的未婚男青年，只有这个年龄层次的男青年撸棒性才是最强的。不过‘撸啊’语言也有一些不完美的地方，比如说‘去附近商店买些面包，如果有鸡蛋的话，买6个回来’这段简单的条件执行代码有时就会发生问题……”

这时总奸的手机突然响了，他掏出手机接电话，好像是什么不好的消息，他有些生气的对电话那边说：“什么，36U的机柜都没？我只要1米8，36U的机柜！”

总奸挂断电话，沉默良久，对我说：“小艾啊，我这边遇到了一些情况，嗯，可能需要让你从事一些设计方面的动作，不知道你能否胜任？”

不知为何忽然我有一种解脱了的感觉，急忙对总奸说：“放心吧总奸，我一定会尽力完成任务的！”

“嗯，小艾，是这个样子的，”总奸说，“你了解我们现在用的‘撸啊’语言是一种非常高级的语言，但是越高级的语言其执行效率就越低，因此现在果壳网的访问速度是比较慢的，很多用户都提出了这个问题，因此就需要你来解决这个问题。”
